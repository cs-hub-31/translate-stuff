# æ¯ä½å¼€å‘è€…éƒ½åº”è¯¥çŸ¥é“SOLIDåŸåˆ™

##### By [Chidume Nnamdi](https://blog.bitsrc.io/@kurtwanger40) | Oct 9, 2018

[åŸæ–‡](https://blog.bitsrc.io/solid-principles-every-developer-should-know-b3bfa96bb688)

é¢å‘å¯¹è±¡çš„ç¼–ç¨‹ç±»å‹ä¸ºè½¯ä»¶å¼€å‘å¸¦æ¥äº†æ–°çš„è®¾è®¡ã€‚

è¿™ä½¿å¼€å‘äººå‘˜èƒ½å¤Ÿåœ¨ä¸€ä¸ªç±»ä¸­ç»„åˆå…·æœ‰ç›¸åŒç›®çš„/åŠŸèƒ½çš„æ•°æ®ï¼Œæ¥å®ç°å•ç‹¬çš„ä¸€ä¸ªåŠŸèƒ½ï¼Œä¸å¿…å…³å¿ƒæ•´ä¸ªåº”ç”¨ç¨‹åºå¦‚ä½•ã€‚

ä½†æ˜¯ï¼Œè¿™ç§é¢å‘å¯¹è±¡çš„ç¼–ç¨‹è¿˜æ˜¯ä¼šè®©å¼€å‘è€…å›°æƒ‘æˆ–è€…å†™å‡ºæ¥çš„ç¨‹åºå¯ç»´æŠ¤æ€§ä¸å¥½ã€‚

ä¸ºæ­¤ï¼ŒRobert C.MartinæŒ‡å®šäº†äº”é¡¹æŒ‡å¯¼æ–¹é’ˆã€‚éµå¾ªè¿™äº”é¡¹æŒ‡å¯¼æ–¹é’ˆèƒ½è®©å¼€å‘äººå‘˜è½»æ¾å†™å‡ºå¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§é«˜çš„ç¨‹åº

è¿™äº”ä¸ªåŸåˆ™è¢«ç§°ä¸ºS.O.L.I.DåŸåˆ™ï¼ˆé¦–å­—æ¯ç¼©å†™è¯ç”±Michael Feathersæ´¾ç”Ÿï¼‰ã€‚

* Sï¼šå•ä¸€è´£ä»»åŸåˆ™
* Oï¼šå¼€é—­åŸåˆ™
* Lï¼šé‡Œå¼æ›¿æ¢
* Iï¼šæ¥å£éš”ç¦»
* Dï¼šä¾èµ–åè½¬

æˆ‘ä»¬åœ¨ä¸‹æ–‡ä¼šè¯¦ç»†è®¨è®ºå®ƒä»¬

ç¬”è®°ï¼šæœ¬æ–‡çš„å¤§å¤šæ•°ä¾‹å­å¯èƒ½ä¸é€‚åˆå®é™…åº”ç”¨æˆ–ä¸æ»¡è¶³å®é™…éœ€æ±‚ã€‚è¿™ä¸€åˆ‡éƒ½å–å†³äºæ‚¨è‡ªå·±çš„è®¾è®¡å’Œç”¨ä¾‹ã€‚è¿™éƒ½ä¸é‡è¦ï¼Œå…³é”®æ˜¯æ‚¨è¦äº†è§£æ˜ç™½è¿™äº”é¡¹åŸåˆ™ã€‚

æç¤ºï¼šSOLIDåŸåˆ™æ—¨åœ¨ç”¨äºæ„å»ºæ¨¡å—åŒ–ã€å°è£…ã€å¯æ‰©å±•å’Œå¯ç»„åˆç»„ä»¶çš„è½¯ä»¶ã€‚Bitæ˜¯ä¸€ä¸ªå¸®åŠ©ä½ è·µè¡Œè¿™äº›åŸåˆ™çš„å¼ºå¤§å·¥å…·ï¼šå®ƒå¯ä»¥å¸®åŠ©æ‚¨åœ¨å›¢é˜Ÿä¸­å¤§è§„æ¨¡åœ°åœ¨ä¸åŒé¡¹ç›®ä¸­è½»æ¾éš”ç¦»ï¼Œå…±äº«å’Œç®¡ç†è¿™äº›ç»„ä»¶.æ¥è¯•è¯•å§ã€‚

[Bit](https://bitsrc.io)

ä½ ä¹Ÿå¯ä»¥åœ¨[è¿™é‡Œ](https://blog.bitsrc.io/introducing-bit-writing-code-in-the-age-of-code-components-fd8512a9aa90)å­¦ä¹ æ›´å¤šå…³äºSOLIDåŸåˆ™å’ŒBitçš„ä¸œè¥¿ã€‚

## Â å•ä¸€è´£ä»»åŸåˆ™

> â€œ......ä½ æœ‰ä¸€ä»½å·¥ä½œâ€ - Lokiæ¥åˆ°é›·ç¥çš„Skurgeï¼šRagnarok
> 
> ä¸€ä¸ªç±»åªå®ç°ä¸€ä¸ªåŠŸèƒ½

ä¸€ä¸ªç±»åº”è¯¥åªè´Ÿè´£ä¸€ä»¶äº‹ã€‚å¦‚æœä¸€ä¸ªç±»è´Ÿè´£è¶…è¿‡ä¸€ä»¶äº‹ï¼Œå°±ä¼šå˜å¾—è€¦åˆã€‚æ”¹åŠŸèƒ½çš„æ—¶å€™ä¼šå½±å“å¦å¤–ä¸€ä¸ªåŠŸèƒ½ã€‚

* ç¬”è®°ï¼šè¯¥åŸåˆ™ä¸ä»…é€‚ç”¨äºç±»ï¼Œè¿˜é€‚ç”¨äºè½¯ä»¶ç»„ä»¶å’Œå¾®æœåŠ¡ã€‚

ä¸¾ä¸ªä¾‹å­ï¼Œè€ƒè™‘è¿™ä¸ªè®¾è®¡ï¼š

	class Animal {
	    constructor(name: string){ }
	    getAnimalName() { }
	    saveAnimal(a: Animal) { }
	}
	
è¿™ä¸ªAnimalç±»è¿åäº†SRPï¼ˆå•ä¸€è´£ä»»åŸåˆ™ï¼‰

æ€ä¹ˆè¿åäº†å‘¢ï¼Ÿ

SRPæ˜ç¡®è¯´æ˜äº†ç±»åªèƒ½å®Œæˆä¸€é¡¹åŠŸèƒ½ï¼Œè¿™é‡Œï¼Œæˆ‘ä»¬æŠŠä¸¤ä¸ªåŠŸèƒ½éƒ½åŠ ä¸Šå»äº†ï¼šanimalæ•°æ®ç®¡ç†å’Œanimalå±æ€§ç®¡ç†ã€‚æ„é€ å‡½æ•°å’ŒgetAnimalNameæ–¹æ³•ç®¡ç†Animalçš„å±æ€§ï¼Œç„¶è€Œï¼ŒsaveAnimalæ–¹æ³•ç®¡ç†Animalçš„æ•°æ®å­˜å‚¨ã€‚

è¿™ç§è®¾è®¡ä¼šç»™ä»¥åçš„å¼€å‘ç»´æŠ¤å¸¦æ¥ä»€ä¹ˆé—®é¢˜ï¼Ÿ

å¦‚æœappçš„æ›´æ”¹ä¼šå½±å“æ•°æ®åº“çš„æ“ä½œã€‚å¿…é¡»ä¼šè§¦åŠå¹¶é‡æ–°ç¼–è¯‘ä½¿ç”¨Animalå±æ€§çš„ç±»ä»¥ä½¿appçš„æ›´æ”¹ç”Ÿæ•ˆã€‚

ä½ ä¼šå‘ç°è¿™æ ·çš„ç³»ç»Ÿç¼ºä¹å¼¹æ€§ï¼Œåƒå¤šç±³è¯ºéª¨ç‰Œä¸€æ ·ï¼Œæ›´æ”¹ä¸€å¤„ä¼šå½±å“å…¶ä»–æ‰€æœ‰çš„åœ°æ–¹ã€‚

è®©æˆ‘ä»¬éµå¾ªSRPåŸåˆ™ï¼Œæˆ‘ä»¬åˆ›å»ºäº†å¦å¤–ä¸€ä¸ªç”¨äºæ•°æ®æ“ä½œçš„ç±»ï¼š

	class Animal {
	    constructor(name: string){ }
	    getAnimalName() { }
	}
	class AnimalDB {
	    getAnimal(a: Animal) { }
	    saveAnimal(a: Animal) { }
	}
	
â€œæˆ‘ä»¬åœ¨è®¾è®¡ç±»æ—¶ï¼Œæˆ‘ä»¬åº”è¯¥æŠŠç›¸å…³çš„åŠŸèƒ½æ”¾åœ¨ä¸€èµ·ï¼Œæ‰€ä»¥å½“ä»–ä»¬éœ€è¦å‘ç”Ÿæ”¹å˜æ—¶ï¼Œä»–ä»¬ä¼šå› ä¸ºåŒæ ·çš„åŸå› è€Œæ”¹å˜ã€‚å¦‚æœæ˜¯å› ä¸ºä¸åŒçš„åŸå› éœ€è¦æ”¹å˜å®ƒä»¬ï¼Œæˆ‘ä»¬åº”è¯¥å°è¯•æŠŠå®ƒä»¬åˆ†å¼€ã€‚â€ - Steven Fenton

éµå¾ªè¿™äº›åŸåˆ™è®©æˆ‘ä»¬çš„appå˜å¾—é«˜å†…èšã€‚

## å¼€é—­åŸåˆ™

> è½¯ä»¶å®ä½“ï¼ˆç±»ï¼Œæ¨¡å—ï¼Œå‡½æ•°ï¼‰åº”è¯¥æ˜¯å¯ä»¥æ‰©å±•çš„ï¼Œè€Œä¸æ˜¯ä¿®æ”¹ã€‚
> 

ç»§ç»­çœ‹æˆ‘ä»¬çš„Animalç±»

	class Animal {
	    constructor(name: string){ }
	    getAnimalName() { }
	}
	
æˆ‘ä»¬æƒ³è¦éå†åŠ¨ç‰©åˆ—è¡¨å¹¶ä¸”è®¾ç½®å®ƒä»¬çš„å£°éŸ³ã€‚

	//...
	const animals: Array<Animal> = [
	    new Animal('lion'),
	    new Animal('mouse')
	];
	function AnimalSound(a: Array<Animal>) {
	    for(int i = 0; i <= a.length; i++) {
	        if(a[i].name == 'lion')
	            return 'roar';
	        if(a[i].name == 'mouse')
	            return 'squeak';
	    }
	}
	AnimalSound(animals);
	
AnimalSoundå‡½æ•°å¹¶ä¸ç¬¦åˆå¼€é—­åŸåˆ™ï¼Œå› ä¸ºä¸€æ—¦æœ‰æ–°åŠ¨ç‰©å‡ºç°ï¼Œå®ƒéœ€è¦ä¿®æ”¹ä»£ç ã€‚

å¦‚æœæˆ‘ä»¬åŠ ä¸€æ¡è›‡è¿›å»ï¼ŒğŸï¼š

	//...
	const animals: Array<Animal> = [
	    new Animal('lion'),
	    new Animal('mouse'),
	    new Animal('snake')
	]
	//...
	
æˆ‘ä»¬ä¸å¾—ä¸æ”¹å˜AnimalSoundå‡½æ•°ï¼š

	//...
	function AnimalSound(a: Array<Animal>) {
	    for(int i = 0; i <= a.length; i++) {
	        if(a[i].name == 'lion')
	            return 'roar';
	        if(a[i].name == 'mouse')
	            return 'squeak';
	        if(a[i].name == 'snake')
	            return 'hiss';
	    }
	}
	AnimalSound(animals);
	
æ¯å½“æ–°çš„åŠ¨ç‰©åŠ å…¥ï¼ŒAnimalSoundå‡½æ•°å°±éœ€è¦åŠ æ–°çš„é€»è¾‘ã€‚è¿™æ˜¯ä¸ªå¾ˆç®€å•çš„ä¾‹å­ã€‚å½“ä½ çš„appå˜å¾—åºå¤§å’Œå¤æ‚æ—¶ï¼Œä½ ä¼šå‘ç°æ¯æ¬¡åŠ æ–°åŠ¨ç‰©çš„æ—¶å€™å°±ä¼šåŠ ä¸€æ¡ifè¯­å¥ï¼Œéšåä½ çš„appå’ŒAnimalSoundå‡½æ•°éƒ½æ˜¯ifè¯­å¥çš„èº«å½±ã€‚

é‚£æ€ä¹ˆä¿®æ”¹AnimalSoundå‡½æ•°å‘¢ï¼Ÿ

	class Animal {
	        makeSound();
	        //...
	}
	class Lion extends Animal {
	    makeSound() {
	        return 'roar';
	    }
	}
	class Squirrel extends Animal {
	    makeSound() {
	        return 'squeak';
	    }
	}
	class Snake extends Animal {
	    makeSound() {
	        return 'hiss';
	    }
	}
	//...
	function AnimalSound(a: Array<Animal>) {
	    for(int i = 0; i <= a.length; i++) {
	        a[i].makeSound();
	    }
	}
	AnimalSound(animals);
	
ç°åœ¨Animalæœ‰ä¸ªmakeSoundçš„ç§æœ‰æ–¹æ³•ã€‚æˆ‘ä»¬æ¯ä¸€ä¸ªanimalç»§æ‰¿äº†Animalç±»å¹¶ä¸”å®ç°äº†ç§æœ‰æ–¹æ³•makeSoundã€‚

æ¯ä¸ªanimalå®ä¾‹éƒ½ä¼šåœ¨makeSoundä¸­æ·»åŠ è‡ªå·±çš„å®ç°æ–¹å¼ã€‚AnimalSoundæ–¹æ³•éå†animalæ•°ç»„å¹¶è°ƒç”¨å…¶makeSoundæ–¹æ³•ã€‚

ç°åœ¨ï¼Œå¦‚æœæˆ‘ä»¬æ·»åŠ äº†æ–°åŠ¨ç‰©ï¼ŒAnimalSoundæ–¹æ³•ä¸éœ€è¦æ”¹å˜ã€‚æˆ‘ä»¬éœ€è¦åšçš„å°±æ˜¯æ·»åŠ æ–°åŠ¨ç‰©åˆ°åŠ¨ç‰©æ•°ç»„ã€‚

AnimalSoundæ–¹æ³•ç°åœ¨éµå¾ªäº†å¼€é—­åŸåˆ™ã€‚

å¦ä¸€ä¸ªä¾‹å­ï¼š

å‡è®¾æ‚¨æœ‰ä¸€ä¸ªå•†åº—ï¼Œå¹¶ä¸”æ‚¨ä½¿ç”¨æ­¤ç±»ç»™æ‚¨å–œçˆ±çš„å®¢æˆ·æ‰“2æŠ˜ï¼š

	class Discount {
	    giveDiscount() {
	        return this.price * 0.2
	    }
	}
	
å½“æ‚¨å†³å®šä¸ºVIPå®¢æˆ·æä¾›åŒå€çš„20ï¼…æŠ˜æ‰£ã€‚ æ‚¨å¯ä»¥åƒè¿™æ ·ä¿®æ”¹ç±»ï¼š

	class Discount {
	    giveDiscount() {
	        if(this.customer == 'fav') {
	            return this.price * 0.2;
	        }
	        if(this.customer == 'vip') {
	            return this.price * 0.4;
	        }
	    }
	}
	
å“ˆå“ˆå“ˆï¼Œè¿™æ ·ä¸å°±èƒŒç¦»å¼€é—­åŸåˆ™äº†ä¹ˆï¼Ÿå¦‚æœæˆ‘ä»¬åˆæƒ³åŠ æ–°çš„æŠ˜æ‰£ï¼Œé‚£åˆæ˜¯ä¸€å †ifè¯­å¥ã€‚

ä¸ºäº†éµå¾ªå¼€é—­åŸåˆ™ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ç»§æ‰¿Discountçš„æ–°ç±»ã€‚åœ¨è¿™ä¸ªæ–°ç±»ä¸­ï¼Œæˆ‘ä»¬å°†ä¼šå®ç°æ–°çš„è¡Œä¸ºï¼š

	class VIPDiscount: Discount {
	    getDiscount() {
	        return super.getDiscount() * 2;
	    }
	}
	
å¦‚æœä½ å†³å®šç»™VIP80%çš„æŠ˜æ‰£ï¼Œå°±åƒè¿™æ ·ï¼š

	class SuperVIPDiscount: VIPDiscount {
	    getDiscount() {
	        return super.getDiscount() * 2;
	    }
	}
	
ä½ çœ‹ï¼Œè¿™ä¸å°±ä¸ç”¨æ”¹äº†ã€‚

## é‡Œæ°æ›¿æ¢

> A sub-class must be substitutable for its super-class

è¿™ä¸ªåŸåˆ™çš„ç›®çš„æ˜¯ç¡®å®šä¸€ä¸ªå­ç±»å¯ä»¥æ¯«æ— é”™è¯¯åœ°å æ®å…¶è¶…ç±»çš„ä½ç½®ã€‚å¦‚æœä»£ç ä¼šæ£€æŸ¥è‡ªå·±ç±»çš„ç±»å‹ï¼Œå®ƒä¸€å®šè¿åäº†è¿™ä¸ªåŸåˆ™ã€‚

ç»§ç»­Animalä¾‹å­ã€‚

	//...
	function AnimalLegCount(a: Array<Animal>) {
	    for(int i = 0; i <= a.length; i++) {
	        if(typeof a[i] == Lion)
	            return LionLegCount(a[i]);
	        if(typeof a[i] == Mouse)
	            return MouseLegCount(a[i]);
	        if(typeof a[i] == Snake)
	            return SnakeLegCount(a[i]);
	    }
	}
	AnimalLegCount(animals);
	
è¿™å·²ç»è¿åäº†é‡Œæ°æ›¿æ¢ï¼ˆä¹Ÿè¿åäº†OCPåŸåˆ™ï¼‰ã€‚å®ƒå¿…é¡»çŸ¥é“æ¯ä¸ªAnimalçš„ç±»å‹å¹¶ä¸”è°ƒç”¨leg-conuntingç›¸å…³ï¼ˆè¿”å›åŠ¨ç‰©è…¿æ•°ï¼‰çš„æ–¹æ³•ã€‚

å¦‚æœè¦åŠ å…¥æ–°çš„åŠ¨ç‰©ï¼Œè¿™ä¸ªæ–¹æ³•å¿…é¡»ç»è¿‡ä¿®æ”¹æ‰èƒ½åŠ å…¥ã€‚

	//...
	class Pigeon extends Animal {
	        
	}
	const animals[]: Array<Animal> = [
	    //...,
	    new Pigeon();
	]
	function AnimalLegCount(a: Array<Animal>) {
	    for(int i = 0; i <= a.length; i++) {
	        if(typeof a[i] == Lion)
	            return LionLegCount(a[i]);
	        if(typeof a[i] == Mouse)
	            return MouseLegCount(a[i]);
	         if(typeof a[i] == Snake)
	            return SnakeLegCount(a[i]);
	        if(typeof a[i] == Pigeon)
	            return PigeonLegCount(a[i]);
	    }
	}
	AnimalLegCount(animals);
	
æ¥ï¼Œæˆ‘ä»¬ä¾æ®é‡Œæ°æ›¿æ¢æ”¹é€ è¿™ä¸ªæ–¹æ³•ï¼Œæˆ‘ä»¬æŒ‰ç…§Steve Fentonè¯´çš„æ¥ï¼š

* å¦‚æœè¶…ç±»ï¼ˆAnimalï¼‰æœ‰ä¸€ä¸ªæ¥å—è¶…ç±»ç±»å‹ï¼ˆAnimalï¼‰å‚æ•°çš„æ–¹æ³•ã€‚ å®ƒçš„å­ç±»ï¼ˆPigeonï¼‰åº”è¯¥æ¥å—è¶…ç±»å‹ï¼ˆAnimalç±»å‹ï¼‰æˆ–å­ç±»ç±»å‹ï¼ˆPigeonç±»å‹ï¼‰ä½œä¸ºå‚æ•°ã€‚
* å¦‚æœè¶…ç±»è¿”å›è¶…ç±»ç±»å‹ï¼ˆAnimalï¼‰ã€‚ å®ƒçš„å­ç±»åº”è¯¥è¿”å›ä¸€ä¸ªè¶…ç±»å‹ï¼ˆAnimalç±»å‹ï¼‰æˆ–å­ç±»ç±»å‹ï¼ˆPigeonï¼‰ã€‚

ç°åœ¨ï¼Œå¼€å§‹æ”¹é€ ï¼š

	function AnimalLegCount(a: Array<Animal>) {
	    for(let i = 0; i <= a.length; i++) {
	        a[i].LegCount();
	    }
	}
	AnimalLegCount(animals);
	
AnimalLegCountå‡½æ•°æ›´å°‘å…³æ³¨ä¼ é€’çš„Animalç±»å‹ï¼Œå®ƒåªè°ƒç”¨LegCountæ–¹æ³•ã€‚å®ƒå°±åªçŸ¥é“è¿™å‚æ•°æ˜¯Animalç±»å‹ï¼Œæˆ–è€…æ˜¯å…¶å­ç±»ã€‚

Animalç±»ç°åœ¨å¿…é¡»å®ç°/å®šä¹‰ä¸€ä¸ªLegCountæ–¹æ³•ï¼š
	
	class Animal {
	    //...
	    LegCount();
	}

ç„¶åå®ƒçš„å­ç±»å°±éœ€è¦å®ç°LegCountæ–¹æ³•ï¼š

	//...
	class Lion extends Animal{
	    //...
	    LegCount() {
	        //...
	    }
	}
	//...
	
å½“å®ƒä¼ é€’ç»™AnimalLegCountæ–¹æ³•æ—¶ï¼Œä»–è¿”å›ç‹®å­çš„è…¿æ•°ã€‚

ä½ çœ‹ï¼ŒAnimalLegCountä¸éœ€è¦çŸ¥é“Animalçš„ç±»å‹æ¥è¿”å›å®ƒçš„è…¿æ•°ï¼Œå®ƒåªè°ƒç”¨Animalç±»å‹çš„LegCountæ–¹æ³•ï¼ŒAnimalç±»çš„å­ç±»å¿…é¡»å®ç°LegCountå‡½æ•°ã€‚

## æ¥å£éš”ç¦»åŸåˆ™

> åˆ¶å®šç‰¹å®šå®¢æˆ·çš„ç»†ç²’åº¦æ¥å£
> ä¸åº”å¼ºè¿«å®¢æˆ·ç«¯ä¾èµ–å®ƒä¸éœ€è¦çš„æ¥å£

è¯¥åŸåˆ™è§£å†³å®ç°å¤§æ¥å£çš„ç¼ºç‚¹ã€‚

è®©æˆ‘ä»¬çœ‹ä¸‹ä¸‹é¢è¿™æ®µä»£ç ï¼š

	interface Shape {
	    drawCircle();
	    drawSquare();
	    drawRectangle();
	}
	
è¿™ä¸ªæ¥å£å®šä¹‰äº†ç”»æ­£æ–¹å½¢ã€åœ†å½¢ã€çŸ©å½¢çš„æ–¹æ³•ã€‚åœ†ç±»ã€æ­£æ–¹å½¢ç±»æˆ–è€…çŸ©å½¢ç±»å°±å¿…é¡»å®ç° drawCircle()ã€ drawSquare()ã€drawRectangle().

	class Circle implements Shape {
	    drawCircle(){
	        //...
	    }
	    drawSquare(){
	        //...
	    }
	    drawRectangle(){
	        //...
	    }    
	}
	class Square implements Shape {
	    drawCircle(){
	        //...
	    }
	    drawSquare(){
	        //...
	    }
	    drawRectangle(){
	        //...
	    }    
	}
	class Rectangle implements Shape {
	    drawCircle(){
	        //...
	    }
	    drawSquare(){
	        //...
	    }
	    drawRectangle(){
	        //...
	    }    
	}
	
ä¸Šé¢çš„ä»£ç çœ‹ç€å¾ˆå¥½ç¬‘ã€‚çŸ©å½¢ç±»å®ç°äº†å®ƒä¸éœ€è¦çš„æ–¹æ³•ã€‚å…¶ä»–ç±»ä¹ŸåŒæ ·çš„ã€‚

è®©æˆ‘ä»¬å†åŠ ä¸€ä¸ªæ¥å£ã€‚

	interface Shape {
	    drawCircle();
	    drawSquare();
	    drawRectangle();
	    drawTriangle();
	}

ç±»å¿…é¡»å®ç°æ–°æ–¹æ³•ï¼Œå¦åˆ™å°†æŠ›å‡ºé”™è¯¯ã€‚

æˆ‘ä»¬çœ‹åˆ°ä¸å¯èƒ½å®ç°å¯ä»¥ç»˜åˆ¶åœ†å½¢è€Œä¸æ˜¯çŸ©å½¢æˆ–æ­£æ–¹å½¢æˆ–ä¸‰è§’å½¢çš„å½¢çŠ¶ã€‚ æˆ‘ä»¬å¯ä»¥å®ç°æ–¹æ³•æ¥æŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œè¡¨æ˜æ— æ³•æ‰§è¡Œæ“ä½œã€‚

è¿™ä¸ªShapeæ¥å£çš„è®¾è®¡ä¸ç¬¦åˆæ¥å£éš”ç¦»åŸåˆ™ã€‚ï¼ˆæ­¤å¤„ä¸ºRectangleï¼ŒCircleå’ŒSquareï¼‰ä¸åº”å¼ºåˆ¶ä¾èµ–äºä»–ä»¬ä¸éœ€è¦æˆ–ä¸ä½¿ç”¨çš„æ–¹æ³•ã€‚

æ­¤å¤–ï¼Œæ¥å£éš”ç¦»åŸåˆ™è¦æ±‚æ¥å£åº”è¯¥åªæ‰§è¡Œä¸€ä¸ªåŠ¨ä½œï¼ˆå°±åƒå•ä¸€è´£ä»»åŸåˆ™ä¸€æ ·ï¼‰ä»»ä½•é¢å¤–çš„è¡Œä¸ºåˆ†ç»„éƒ½åº”è¯¥è¢«æŠ½è±¡åˆ°å¦ä¸€ä¸ªæ¥å£ã€‚

è¿™é‡Œï¼Œæˆ‘ä»¬çš„Shapeæ¥å£æ‰§è¡Œåº”ç”±å…¶ä»–æ¥å£ç‹¬ç«‹å¤„ç†çš„åŠ¨ä½œã€‚

ä¸ºäº†ä½¿æˆ‘ä»¬çš„Shapeæ¥å£ç¬¦åˆISPåŸåˆ™ï¼Œæˆ‘ä»¬å°†æ“ä½œåˆ†ç¦»åˆ°ä¸åŒçš„æ¥å£ï¼š

	interface Shape {
	    draw();
	}
	interface ICircle {
	    drawCircle();
	}
	interface ISquare {
	    drawSquare();
	}
	interface IRectangle {
	    drawRectangle();
	}
	interface ITriangle {
	    drawTriangle();
	}
	class Circle implements ICircle {
	    drawCircle() {
	        //...
	    }
	}
	class Square implements ISquare {
	    drawSquare() {
	        //...
	    }
	}
	class Rectangle implements IRectangle {
	    drawRectangle() {
	        //...
	    }    
	}
	class Triangle implements ITriangle {
	    drawTriangle() {
	        //...
	    }
	}
	class CustomShape implements Shape {
	   draw(){
	      //...
	   }
	}
	
ICircleæ¥å£ä»…å¤„ç†åœ†å½¢ç»˜ç”»ï¼ŒShapeå¤„ç†ä»»ä½•å½¢çŠ¶çš„ç»˜å›¾:)ï¼ŒISquareå¤„ç†ä»…æ­£æ–¹å½¢çš„ç»˜åˆ¶å’ŒIRectangleå¤„ç†çŸ©å½¢ç»˜åˆ¶ã€‚

## ä¾èµ–åè½¬

> ä¾èµ–åº”è¯¥æ˜¯æŠ½è±¡è€Œä¸æ˜¯concretions
> é«˜çº§æ¨¡å—ä¸åº”è¯¥ä¾èµ–äºä½çº§æ¨¡å—ã€‚ ä¸¤è€…éƒ½åº”è¯¥å–å†³äºæŠ½è±¡ã€‚
> æŠ½è±¡ä¸åº”è¯¥ä¾èµ–äºç»†èŠ‚ã€‚ ç»†èŠ‚åº”å–å†³äºæŠ½è±¡ã€‚

åœ¨è½¯ä»¶å¼€å‘æœ‰ä¸€ç‚¹ï¼Œå°±æ˜¯æˆ‘ä»¬çš„appä¸»è¦ç”±æ¨¡å—ç»„æˆã€‚å½“å‘ç”Ÿè¿™ç§æƒ…å†µæ—¶ï¼Œæˆ‘ä»¬å¿…é¡»é€šè¿‡ä½¿ç”¨ä¾èµ–æ³¨å…¥æ¥æ¸…é™¤é—®é¢˜ã€‚ é«˜çº§ç»„ä»¶å–å†³äºä½çº§ç»„ä»¶çš„åŠŸèƒ½ã€‚
	
	class XMLHttpService extends XMLHttpRequestService {}
	class Http {
	    constructor(private xmlhttpService: XMLHttpService) { }
	    get(url: string , options: any) {
	        this.xmlhttpService.request(url,'GET');
	    }
	    post() {
	        this.xmlhttpService.request(url,'POST');
	    }
	    //...
	}
	
è¿™é‡Œï¼ŒHttpæ˜¯é«˜çº§ç»„ä»¶ï¼Œè€ŒHttpServiceæ˜¯ä½çº§ç»„ä»¶ã€‚æ­¤è®¾è®¡è¿åä¾èµ–åè½¬ç¬¬ä¸€æ¡ï¼šé«˜çº§æ¨¡å—ä¸åº”è¯¥ä¾èµ–äºä½çº§æ¨¡å—ã€‚ ä¸¤è€…éƒ½åº”è¯¥å–å†³äºæŠ½è±¡ã€‚

Httpç±»è¢«è¿«ä¾èµ–äºXMLHttpServiceç±»ã€‚ å¦‚æœæˆ‘ä»¬è¦æ”¹å˜ä»¥æ”¹å˜Httpè¿æ¥æœåŠ¡ï¼Œä¹Ÿè®¸æˆ‘ä»¬æƒ³é€šè¿‡Nodejsè¿æ¥åˆ°äº’è”ç½‘ï¼Œç”šè‡³æ¨¡æ‹ŸhttpæœåŠ¡ã€‚æˆ‘ä»¬å°†è‰°éš¾åœ°é€šè¿‡Httpçš„æ‰€æœ‰å®ä¾‹æ¥ç¼–è¾‘ä»£ç ï¼Œè¿™è¿åäº†OCPï¼ˆä¾èµ–åè½¬ï¼‰åŸåˆ™ã€‚

Httpç±»åº”è¯¥æ›´å°‘å…³æ³¨æ­£åœ¨ä½¿ç”¨çš„HttpæœåŠ¡çš„ç±»å‹ã€‚ æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªConnectionæ¥å£ï¼š

	interface Connection {
	    request(url: string, opts:any);
	}
	
Connectionæ¥å£æœ‰ä¸€ä¸ªè¯·æ±‚æ–¹æ³•ã€‚ æœ‰äº†è¿™ä¸ªï¼Œæˆ‘ä»¬å°†ä¸€ä¸ªConnectionç±»å‹çš„å‚æ•°ä¼ é€’ç»™æˆ‘ä»¬çš„Httpç±»ï¼š

	class Http {
	    constructor(private httpConnection: Connection) { }
	    get(url: string , options: any) {
	        this.httpConnection.request(url,'GET');
	    }
	    post() {
	        this.httpConnection.request(url,'POST');
	    }
	    //...
	}
	
ç°åœ¨ï¼ŒHttpç±»çš„æ— éœ€çŸ¥é“å®ƒæ­£åœ¨ä½¿ç”¨ä»€ä¹ˆç±»å‹çš„æœåŠ¡ã€‚å®ƒéƒ½èƒ½æ­£å¸¸å·¥ä½œã€‚

æˆ‘ä»¬ç°åœ¨å¯ä»¥é‡æ–°å†™æˆ‘ä»¬çš„XMLHttpServiceç±»æ¥å®ç°Connectionæ¥å£ï¼š
	
	class XMLHttpService implements Connection {
	    const xhr = new XMLHttpRequest();
	    //...
	    request(url: string, opts:any) {
	        xhr.open();
	        xhr.send();
	    }
	}
	
æˆ‘ä»¬å¯ä»¥åˆ›å»ºå¾ˆå¤šå„ç§ç”¨é€”çš„Httpç±»å¹¶ä¸”ä¸ç”¨æ‹…å¿ƒå‡ºé—®é¢˜ã€‚
	
	class NodeHttpService implements Connection {
	    request(url: string, opts:any) {
	        //...
	    }
	}
	class MockHttpService implements Connection {
	    request(url: string, opts:any) {
	        //...
	    }    
	}
	
ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°é«˜çº§æ¨¡å—å’Œä½çº§æ¨¡å—éƒ½ä¾èµ–äºæŠ½è±¡ã€‚Httpç±»ï¼ˆé«˜çº§æ¨¡å—ï¼‰ä¾èµ–Connectionæ¥å£ï¼ˆæŠ½è±¡ï¼‰ï¼ŒHttpæœåŠ¡ï¼ˆä½çº§æ¨¡å—ï¼‰å®ç°Connectionæ¥å£ã€‚

æ­¤å¤–ï¼Œä¾èµ–åè½¬è¿˜å¼ºåˆ¶æˆ‘ä»¬ä¸è¦è¿åé‡Œå¼æ›¿æ¢ï¼šè¿æ¥ç±»å‹Node-XML-MockHttpServiceå¯æ›¿æ¢å…¶çˆ¶ç±»å‹Connectionã€‚

## ç»“è®º

æˆ‘ä»¬æ¶µç›–äº†æ¯ä¸ªè½¯ä»¶å¼€å‘äººå‘˜å¿…é¡»éµå®ˆçš„äº”é¡¹åŸåˆ™ã€‚ ä¸€å¼€å§‹å¯èƒ½éš¾ä»¥éµå®ˆæ‰€æœ‰è¿™äº›åŸåˆ™ï¼Œä½†é€šè¿‡é•¿æœŸçš„åšæŒï¼Œå®ƒå°†æˆä¸ºæˆ‘ä»¬çš„ä¸€éƒ¨åˆ†ï¼Œå¹¶å°†æå¤§åœ°å½±å“æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºçš„ç»´æŠ¤ã€‚

å¦‚æœæ‚¨æœ‰ä»»ä½•ç–‘é—®ï¼Œè¯·éšæ—¶åœ¨ä¸‹é¢å‘è¡¨è¯„è®ºï¼Œæˆ‘å¾ˆä¹æ„è°ˆè°ˆï¼
