# 页面缓存—内存和文件之间的事情

上一次我们查看了内核是如何管理用户斤程的虚拟内存的，但是文件和 IO 我们并没有涉及到。这一篇文章将会覆盖文件和内存之间的关系以及对性能的影响，这种关系非常重要但经常令人迷惑。

对于文件，操作系统有两个重要的问题必须得到解决。一个是硬盘的速度真的非常慢，并且相比内存，磁盘寻址的方式也很特殊。另外一个是文件需要被载入在物理内存中，并被多个程序共享。如果你使用进程管理器查看 Windows 的进程，你会看到大约 15MB 的 DLLs 被载入到每个进程中。我的 Windows 机器目前运行了 100 个进程，如果没有这种共享机制，这些进程将会需要大约 15GB 的物理内存，而且还只是用于普通的 DDLs，这非常糟糕。同样，几乎所有的 Linux 程序都需要 `ld.so` 和 `lib.c`,加上其他的一些普通库。

幸运的是，这两个问题都可以一次性解决:页面缓存，内核在其中存储页面大小的文件块。